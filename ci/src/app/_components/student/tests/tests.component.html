<div class="applications">
  <mat-card>
    <div class="title">
      <span *ngIf="!showCompletedApplications">My Tests</span>
      <span *ngIf="showCompletedApplications">Finished Tests</span>
    </div>
    <div *ngIf="!showCompletedApplications && applications.length > 0" class="applications-list">
      <mat-button-toggle-group #group="matButtonToggleGroup" [value]="selectedAppId" vertical>
        <mat-button-toggle *ngFor="let application of applications" [value]="application.id" (click)="onChangeToDo(application)" >
          <div class="app-select-container" [class.disabled]="application.is_blocked">
            <div class="app-img" [style.background-image]="setIcon(application.icon)"></div>
            <div class="app-data">
              <span class="app-title">
                <strong>{{application.name}}</strong>
                <span *ngIf="application.class" class="app-class">{{application.class.name}}</span>
                <strong *ngIf="application.duration" class="app-class">{{application.duration}}</strong>
              </span>
              <span class="app-date">
                <span *ngIf="application.is_blocked && application.start_at" class="due-date">Start At: {{application.start_at}}</span>
                <span *ngIf="application.due_at" class="due-date">Due At: {{application.due_at}}</span>
              </span>
            </div>
          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
      <div *ngIf="completedApplications.length > 0" class="toggle-button" (click)="this.showCompletedApplications = !this.showCompletedApplications" >
        See Finished Tests
      </div>
    </div>
    <div *ngIf="!showCompletedApplications && applications.length < 1">
      <div class="subtitle text-center">
        You have no Tests!
      </div>
      <div *ngIf="completedApplications.length > 0" class="button-container">
          <div class="toggle-button" (click)="this.showCompletedApplications = !this.showCompletedApplications">
            See Finished Tests
          </div>
      </div>
    </div>
    <div *ngIf="showCompletedApplications" class="applications-list">
      <mat-button-toggle-group #group="matButtonToggleGroup" [value]="selectedAppId" vertical>
        <mat-button-toggle *ngFor="let application of completedApplications" [value]="application.id" (click)="onChangeToDo(application)" >
          <div class="app-select-container completed" [class.disabled]="application.is_blocked">
            <div class="app-img" [style.background-image]="setIcon(application.icon)"></div>
            <div class="app-data">
              <span class="app-title">
                <strong>{{application.name}}</strong>
                <span *ngIf="application.class" class="app-class">{{application.class.name}}</span>
                <strong *ngIf="application.mark" class="app-class">Mark: {{(application.mark * 100).toFixed(0)}}%</strong>
              </span>
              <div class="date-container">
                <span *ngIf="application.completed_at" class="due-date">
                  Finished At: {{application.completed_at}}
                </span>
              </div>
            </div>

          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
      <div class="toggle-button" (click)="this.showCompletedApplications = !this.showCompletedApplications" >
        See Available Tests
      </div>
    </div>
    <div class="options" (click)="openOptionsDialog()">
      <span class="material-icons">settings</span> Options
    </div>
  </mat-card>
</div>
