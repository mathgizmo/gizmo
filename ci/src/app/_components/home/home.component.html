<div *ngIf="topicsTree.length" class="topics">
  <div *ngFor="let level of topicsTree; let levelIndex = 'index'" >
    <mat-card *ngIf="level.units.length" class="level">
      <h3 class="level-title">{{level.title}}</h3>
      <mat-card class="unit" *ngFor="let unit of level.units; let unitIndex = 'index'">
        <h4 class="unit-title">{{unit.title}}</h4>
        <div class="topics-container">
          <div *ngFor="let topic of unit.topics; let topicIndex = 'index'" class="topic">
            <a [routerLink]="topic.status == 0 ? '' : '/topic/'+topic.id" routerLinkActive="active" [class.disabled]="topic.status == 0 ? true : null" class="topic-picture">
              <div [ngClass]="topic.image_id ? topic.image_id : 'cb0-img'">
                <div *ngIf="topic.status != 2" class="topicButton"  [ngClass]="topic.status == 1 ? 'greenout': 'redout'" >
                </div>
                <div *ngIf="topic.status == 2" class="topicButton"  [ngClass]="'yellowout'" >
                  <div [ngStyle]="{'height.%' : topic.progress.percent}" class="bottom_progress" [ngClass]="'greenout'"></div>
                </div>
              </div>
            </a>
            <div class="topic-progress"> {{topic.progress.done}} of {{topic.progress.total}} done</div>
            <div>
              <div *ngIf="!topic.short_name" class="topic-title">{{topic.title}}</div>
              <div *ngIf="topic.short_name" class="topic-title">{{topic.short_name}}</div>  
            </div>
          </div>
        </div>
      </mat-card>
    </mat-card>
  </div>
</div>

<!-- Old template (without Angular Material)
<div class="text-center">
    <div ng-if="topicsTree.length">
        <div *ngFor="let level of topicsTree; let levelIndex = index">
            <div *ngIf="level.units.length" class="shadow">
                <h3 style="font-weight: bold;">{{level.title}}</h3>
                <div *ngFor="let unit of level.units; let unitIndex = index"  class="shadow">
                    <h4>{{unit.title}}</h4>
                    <div *ngFor="let topic of unit.topics; let topicIndex = index" style="display: inline-block;width:33%;vertical-align:top;">
                        <span class="fa-stack fa-4x" >
                            <a [routerLink]="topic.status == 0 ? '' : '/topic/'+topic.id" routerLinkActive="active" [class.disabled]="topic.status == 0 ? true : null">
                                <div [ngClass]="topic.image_id ? topic.image_id : 'cb0-img'">
                                    <div *ngIf="topic.status != 2" class="topicButton"  [ngClass]="topic.status == 1 ? 'greenout': 'redout'" ></div>
                                    <div *ngIf="topic.status == 2" class="topicButton"  [ngClass]="'yellowout'" >
                                        <div [ngStyle]="{'height.%' : topic.progress.percent}" class="bottom_progress" [ngClass]="'greenout'"></div>
                                    </div>
                                </div>
                            </a>
                        </span>
                        <div> {{topic.progress.done}} of {{topic.progress.total}} done</div>
                        <div *ngIf="!topic.short_name">{{topic.title}}</div>
                        <div *ngIf="topic.short_name">{{topic.short_name}}</div>
                    </div>
                    <div style="width:1%"></div>
                    <div style="clear:both"><br /></div>
                </div>
            </div>
        </div>
    </div>
</div>
-->