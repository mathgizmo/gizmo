<div class="profile">

  <mat-card>
    <span class="title">Applications</span>
    <div class="applications-list" *ngIf="applications.length > 0">
      <mat-button-toggle-group #group="matButtonToggleGroup" [value]="selectedAppId" vertical>
        <mat-button-toggle *ngFor="let application of applications" [value]="application.id" (click)="onChangeApplication(application.id)" >
          <div class="app-select-container">
            <div class="app-img" [style.background-image]="setIcon(application.icon)"></div>
            <div class="app-title">
              <strong>{{application.name}}</strong>
            </div>
          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </mat-card>

  <mat-card id="profile-container">
  	<span class="title">Change Profile Info</span>
    <form #changeProfile="ngForm" (ngSubmit)="onChangeProfile()">
      <mat-form-field>
        <input matInput
          name="username"
          pattern="[a-zA-Z0-9]{2,255}"
          placeholder="Username"
          [(ngModel)]="user.username"
          class="answer" />
      </mat-form-field>
      <mat-form-field>
        <input matInput
               name="first_name"
               pattern="[a-zA-Z]{2,255}"
               placeholder="First Name"
               [(ngModel)]="user.first_name"
               class="answer" />
      </mat-form-field>
      <mat-form-field>
        <input matInput
               name="last_name"
               pattern="[a-zA-Z]{2,255}"
               placeholder="Last Name"
               [(ngModel)]="user.last_name"
               class="answer" />
      </mat-form-field>
      <mat-form-field>
        <input matInput
          name="email"
          pattern="^\S+@\S+$"
          placeholder="Email"
          [(ngModel)]="user.email"
          class="answer" />
      </mat-form-field>
      <mat-form-field>
        <label class="answer">Please set the number of consecutive correct answers  which will signify lesson completion for you. You can come back to profile to change the setting if you wish. (put 0 to answer all questions)</label>
        <input matInput
          name="question_num"
          pattern="[0-9]{1,2}"
          [(ngModel)]="user.question_num"
          class="answer" />
      </mat-form-field>
      <div class="alert alert-danger" *ngIf="badEmail">
         <mat-icon>warning</mat-icon>
         <span class="answer">&nbsp;{{warningMessage}}</span>
      </div>
      <div class="button-container">
        <button
          mat-raised-button
          type="submit"
          class='button'>
          <span>Update</span>
        </button>
    	</div>
  	</form>
  </mat-card>

  <mat-card>
    <span class="title">Change Password</span>
    <form #changePassword="ngForm" (ngSubmit)="onChangePassword(newPassword.value, confirmedPassword.value)">
      <mat-form-field>
        <input matInput
          required="required"
          pattern=".{6,30}"
          type="password"
          placeholder="New Password"
          #newPassword
          class="answer" />
      </mat-form-field>
      <mat-form-field>
        <input matInput
          required="required"
          pattern=".{6,30}"
          type="password"
          placeholder="Confirm Password"
          #confirmedPassword
          class="answer" />
      </mat-form-field>
      <div class="alert alert-danger" *ngIf="!passwordsMatch">
         <mat-icon>warning</mat-icon>
         <span class="answer">&nbsp;{{warningMessage}}</span>
      </div>
      <div class="button-container" >
        <button id="change-password-button"
          mat-raised-button
          type="submit"
          class="button">
          <span>Change Password</span>
        </button>
      </div>
    </form>
  </mat-card>
</div>
