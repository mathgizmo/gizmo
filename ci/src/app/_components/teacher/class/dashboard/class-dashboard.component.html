<a routerLink="/teacher/class" routerLinkActive="active" class="back">{{backLinkText}}</a>
<div class="dashboard">
  <app-class-menu [classId]="classId" class="class-menu"></app-class-menu>
  <mat-card class="dashboard-content">
    <app-students-usage-chart [classId]="classId"></app-students-usage-chart>
    <div class="subtitle text-center" style="text-align:center; margin-top: 32px;">Assignments List</div>
    <div class="table-responsive">
      <table matSort (matSortChange)="sortData($event)" class="table">
        <thead>
        <tr>
          <th scope="col">Icon</th>
          <th mat-sort-header="name" scope="col">Name</th>
          <th mat-sort-header="start_date" scope="col">Start Date</th>
          <th mat-sort-header="start_time" scope="col">Start Time</th>
          <th mat-sort-header="due_date" scope="col">Due Date</th>
          <th mat-sort-header="due_time" scope="col">Due Time</th>
          <th scope="col">Status</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of assignments">
          <th scope="col" style="width: 40px;">
            <div class="app-img" style="width: 38px; height: 38px;" [style.background-image]="setIcon(item.icon)"></div>
          </th>
          <td>{{item.name}}</td>
          <td class="date-container">
            {{item.start_date || currentDate}}
          </td>
          <td class="date-container">
            {{item.start_time || '00:00'}}
          </td>
          <td class="date-container">
            {{item.due_date ? item.due_date : 'N/A' }}
          </td>
          <td class="date-container">
            <span *ngIf="item.due_date">{{item.due_time || '00:00'}}</span>
            <span *ngIf="!item.due_date">N/A</span>
          </td>
          <td [class]="item.status">
            {{item.status == 'completed' ? 'Closed' :
                  (item.status == 'overdue' ? 'Overdue' : item.status == 'progress' ?  'In progress' : 'Pending')}}
            <div *ngIf="item.progress !== undefined && item.status !== 'pending' && item.status !== 'completed'">
              <span style="font-size: 0.8em;">{{(item.progress * 100).toFixed(1)}}%</span>
              <mat-progress-bar  mode="determinate" [value]="item.progress * 100"></mat-progress-bar>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </mat-card>
</div>
